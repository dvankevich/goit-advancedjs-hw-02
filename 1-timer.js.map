{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["'use strict';\n\nimport flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n//import 'flatpickr/dist/themes/light.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet userSelectedDate = 0;\n\nconst startButton = document.querySelector('button');\nconst inputField = document.querySelector('input');\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    const dateNow = Date.now();\n    userSelectedDate = selectedDates[0];\n    if (userSelectedDate.getTime() < dateNow) {\n      //window.alert('Please choose a date in the future');\n      iziToast.error({\n        title: 'Error',\n        message: 'Please choose a date in the future',\n        position: 'topRight',\n        titleColor: '#fff',\n        titleSize: '16px',\n        titleLineHeight: '1.5',\n        messageColor: '#fff',\n        messageSize: '16px',\n        messageLineHeight: '1.5',\n        backgroundColor: '#ef4040',\n        theme: 'light',\n        iconUrl: 'izi-icon.svg', // зображення має бути у папці public\n        imageWidth: 24,\n      });\n      startButton.disabled = true;\n    } else {\n      startButton.disabled = false;\n    }\n  },\n};\n\nconst fp = flatpickr('input#datetime-picker', options);\n\nconst interval = {\n  days: '03',\n  hours: '09',\n  minutes: '01',\n  seconds: '04',\n};\n\nfunction updateTimerInterface(interval) {\n  // Get the element with the \"data-*\" attributes\n  const daysElement = document.querySelector('.timer .field .value[data-days]');\n  const hoursElement = document.querySelector(\n    '.timer .field .value[data-hours]'\n  );\n  const minutesElement = document.querySelector(\n    '.timer .field .value[data-minutes]'\n  );\n  const secondsElement = document.querySelector(\n    '.timer .field .value[data-seconds]'\n  );\n\n  // set interface elements\n  daysElement.innerText = interval.days;\n  hoursElement.innerText = interval.hours;\n  minutesElement.innerText = interval.minutes;\n  secondsElement.innerText = interval.seconds;\n}\n\nfunction convertUnixTimeToTime(milliseconds) {\n  // ToDo use padStart function https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padStart\n  function addZero(s) {\n    if (s.length === 1) {\n      s = '0' + s;\n    }\n    return s;\n  }\n  // Отримання кількості днів, годин, хвилин та секунд\n  const days = Math.floor(milliseconds / (24 * 60 * 60 * 1000)).toString();\n  const hours = Math.floor(\n    (milliseconds % (24 * 60 * 60 * 1000)) / (60 * 60 * 1000)\n  ).toString();\n  const minutes = Math.floor(\n    (milliseconds % (60 * 60 * 1000)) / (60 * 1000)\n  ).toString();\n  const seconds = Math.floor((milliseconds % (60 * 1000)) / 1000).toString();\n\n  // Повернення результату у вигляді об'єкта\n  return {\n    days: addZero(days),\n    hours: addZero(hours),\n    minutes: addZero(minutes),\n    seconds: addZero(seconds),\n  };\n}\n\nstartButton.addEventListener('click', () => {\n  //console.log('Button click handler');\n  startButton.disabled = true;\n  inputField.disabled = true;\n\n  // create interval\n  const intervalId = setInterval(() => {\n    const timeToGo = userSelectedDate - Date.now();\n    //console.log(timeToGo);\n    if (userSelectedDate - Date.now() > 0) {\n      updateTimerInterface(convertUnixTimeToTime(timeToGo));\n    } else {\n      startButton.disabled = false;\n      inputField.disabled = false;\n      clearInterval(intervalId);\n    }\n  }, 1000);\n});\n\n// Deactivate button\nstartButton.disabled = true;\ninputField.disabled = false;\n"],"names":["userSelectedDate","startButton","inputField","options","selectedDates","dateNow","iziToast","flatpickr","updateTimerInterface","interval","daysElement","hoursElement","minutesElement","secondsElement","convertUnixTimeToTime","milliseconds","addZero","s","days","hours","minutes","seconds","intervalId","timeToGo"],"mappings":"+IAQA,IAAIA,EAAmB,EAEvB,MAAMC,EAAc,SAAS,cAAc,QAAQ,EAC7CC,EAAa,SAAS,cAAc,OAAO,EAE3CC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,MAAMC,EAAU,KAAK,IAAG,EACxBL,EAAmBI,EAAc,CAAC,EAC9BJ,EAAiB,QAAO,EAAKK,GAE/BC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,qCACT,SAAU,WACV,WAAY,OACZ,UAAW,OACX,gBAAiB,MACjB,aAAc,OACd,YAAa,OACb,kBAAmB,MACnB,gBAAiB,UACjB,MAAO,QACP,QAAS,eACT,WAAY,EACpB,CAAO,EACDL,EAAY,SAAW,IAEvBA,EAAY,SAAW,EAE3B,CACF,EAEWM,EAAU,wBAAyBJ,CAAO,EASrD,SAASK,EAAqBC,EAAU,CAEtC,MAAMC,EAAc,SAAS,cAAc,iCAAiC,EACtEC,EAAe,SAAS,cAC5B,kCACJ,EACQC,EAAiB,SAAS,cAC9B,oCACJ,EACQC,EAAiB,SAAS,cAC9B,oCACJ,EAGEH,EAAY,UAAYD,EAAS,KACjCE,EAAa,UAAYF,EAAS,MAClCG,EAAe,UAAYH,EAAS,QACpCI,EAAe,UAAYJ,EAAS,OACtC,CAEA,SAASK,EAAsBC,EAAc,CAE3C,SAASC,EAAQC,EAAG,CAClB,OAAIA,EAAE,SAAW,IACfA,EAAI,IAAMA,GAELA,CACT,CAEA,MAAMC,EAAO,KAAK,MAAMH,GAAgB,KAAU,GAAK,IAAK,EAAE,SAAQ,EAChEI,EAAQ,KAAK,MAChBJ,GAAgB,KAAU,GAAK,MAAU,KAAU,IACxD,EAAI,SAAQ,EACJK,EAAU,KAAK,MAClBL,GAAgB,KAAU,MAAU,GAAK,IAC9C,EAAI,SAAQ,EACJM,EAAU,KAAK,MAAON,GAAgB,GAAK,KAAS,GAAI,EAAE,SAAQ,EAGxE,MAAO,CACL,KAAMC,EAAQE,CAAI,EAClB,MAAOF,EAAQG,CAAK,EACpB,QAASH,EAAQI,CAAO,EACxB,QAASJ,EAAQK,CAAO,CAC5B,CACA,CAEApB,EAAY,iBAAiB,QAAS,IAAM,CAE1CA,EAAY,SAAW,GACvBC,EAAW,SAAW,GAGtB,MAAMoB,EAAa,YAAY,IAAM,CACnC,MAAMC,EAAWvB,EAAmB,KAAK,IAAG,EAExCA,EAAmB,KAAK,IAAG,EAAK,EAClCQ,EAAqBM,EAAsBS,CAAQ,CAAC,GAEpDtB,EAAY,SAAW,GACvBC,EAAW,SAAW,GACtB,cAAcoB,CAAU,EAE5B,EAAG,GAAI,CACT,CAAC,EAGDrB,EAAY,SAAW,GACvBC,EAAW,SAAW"}